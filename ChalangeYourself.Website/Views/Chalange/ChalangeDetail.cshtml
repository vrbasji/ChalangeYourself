@model ChalangeYourself.Website.Models.DetailChalangeViewModel
@using Microsoft.AspNet.Identity
<div>
    <table>
        @{ int rank = 1;
            foreach (var user in Model.RegisteredUsers)
            {
                <tr>
                    <td>@rank</td>
                    <td>@user.UserId</td>
                    <td>@user.Username</td>
                    <td>@user.Points</td>
                </tr>
                rank++;
            }
        }
    </table>
    <h4>@Model.Name</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.ChalangeId)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ChalangeId)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Description)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Description)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.StartDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.StartDate)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.EndDate)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.EndDate)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.ThumbnailUrl)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.ThumbnailUrl)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.MinAge)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.MinAge)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.MaxAge)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.MaxAge)
        </dd>

    </dl>
</div>
<p>
    @if (User.Identity.IsAuthenticated)
    {
        if (Model.RegisteredUsers.FirstOrDefault(x => x.UserId == User.Identity.GetUserId()) == null)
        {
            @Html.ActionLink("Jdu do toho!", "Pripojit", new { chalangeId = Model.ChalangeId })
        }
        else
        {
            @Html.ActionLink("Již jsi v chalangy zapsán", null)
        }
    }
    else
    {
        @Html.ActionLink("Pro připojení je nutné se přihlásit", "Login", "Account", routeValues: null, htmlAttributes: new { id = "loginLink" })
    }
</p>
